

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Chapter 4 - Organizing Data &#8212; Pomona Psych 158 Online Textbook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapter-4';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Pomona College Psych 158 Online Textbook
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Unit 1 Describing Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-1.ipynb">Chapter 1 - Intro to Doing Statistics</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-2.ipynb">Chapter 2 - Statistical Reasoning</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-3.ipynb">Chapter 3 - What are Data</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-4.ipynb">Chapter 4 - Organizing Data</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-5.ipynb">Chapter 5 - Describing Data</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-6.ipynb">Chapter 6 - Variation in Multiple Variables</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-7.ipynb">Chapter 7 - Principles of Data Visualization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Unit 2 - Modeling Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-8.ipynb">Chapter 8 - Where Data Come From</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-9.ipynb">Chapter 9 - Modeling the Data Generation Process</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-10.ipynb">Chapter 10 - Quantifying Model Error</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-11.ipynb">Chapter 11 - Adding an Explanatory Variable</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-12.ipynb">Chapter 12 - Quantitative Predictor Models</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-13.ipynb">Chapter 13 - Multivariable Models</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-14.ipynb">Chapter 14 - Nonlinear Models</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-15.ipynb">Chapter 15 - Models with Categorical Outcomes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Unit 3 - Evaluating Models</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-16.ipynb">Chapter 16 - Estimating Populations</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-17.ipynb">Chapter 17 - Significance Testing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-18.ipynb">Chapter 18 - Significance Testing Whole Models</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-19.ipynb">Chapter 19 - Effect Sizes &amp; Power</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-20.ipynb">Chapter 20 - Alternate Approaches - Traditional Inference Methods</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-21.ipynb">Chapter 21 - Alternate Approaches - Bayesian Statistics</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-22.ipynb">Chapter 22 - Bias due to Improper Model Building</a></li>
<li class="toctree-l1"><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-23.ipynb">Chapter 23 - Bias due to Improper Model Selection</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/smburns47/Psyc158/main?urlpath=tree/chapter-4.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/smburns47/Psyc158" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/smburns47/Psyc158/issues/new?title=Issue%20on%20page%20%2Fchapter-4.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/chapter-4.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 4 - Organizing Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-structure-of-data">4.1 The structure of data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-data-frame">4.2 Creating a data frame</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-vectors">Combining vectors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-existing-data">Importing existing data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#looking-at-data">4.3 Looking at data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-variables">4.4 Accessing variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#subsetting-data">4.5 Subsetting data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-data">4.6 Manipulating data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identifying-missing-data">Identifying missing data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-data">Filtering data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-new-variables">Creating new variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recoding-variables">Recoding variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-data">4.7 Saving data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-summary">Chapter summary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <p><a class="reference external" href="https://www.shannonmburns.com/Psyc158/intro.html">Back to Table of Contents</a></p>
<p><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-3.ipynb">Previous: Chapter 3 - What are Data</a></p>
<section class="tex2jax_ignore mathjax_ignore" id="chapter-4-organizing-data">
<h1>Chapter 4 - Organizing Data<a class="headerlink" href="#chapter-4-organizing-data" title="Permalink to this heading">#</a></h1>
<section id="the-structure-of-data">
<h2>4.1 The structure of data<a class="headerlink" href="#the-structure-of-data" title="Permalink to this heading">#</a></h2>
<p>Data can come to us in many forms. If you collect data yourself, you may start out with numbers written on scraps of paper. Or you may get a computer file filled with numbers and words of various sorts, representing many variables at once.</p>
<p>So far we have worked with one variable at a time, which is easy to visualize and understand simply by printing its vector. However, most real-world data has many variables stored at once. To manage this, it is necessary to organize and format data so that they are easy to analyze using statistical software. There is no one way to organize data, but there is a way that is most common, and that is what we recommend you use.</p>
<p>This common way is called a <strong>data frame</strong>. Under this framework, data are stored into rectangular tables, with rows and columns. What goes on each row and column follows four principles:</p>
<ul class="simple">
<li><p>Each column is a variable</p></li>
<li><p>Each row is an observation</p></li>
<li><p>The first row contains the names of all the variables</p></li>
<li><p>The data within a dataframe are from the same dataset</p></li>
</ul>
<p>Rectangular tables of this sort are represented in R using a new data type - conveniently, called a data frame. The columns are the variables; this is where the results of measures are kept. The rows are the cases sampled. Each value of different variables that are on the same row belong to the same observation (e.g., the same person, zip code, habitat, etc.) Data frames provide a way to save information such as column headings (i.e., variable names) in the same table as the actual data values.</p>
<p>Principle 4 above simply states that the types of observations that form the rows cannot be mixed within a single table. So, for example, you wouldn’t have rows of college students intermixed with rows of cars or countries or couples. If you have a mix of observation types (e.g., students, families, countries), they each go in a different dataframe.</p>
</section>
<section id="creating-a-data-frame">
<h2>4.2 Creating a data frame<a class="headerlink" href="#creating-a-data-frame" title="Permalink to this heading">#</a></h2>
<section id="combining-vectors">
<h3>Combining vectors<a class="headerlink" href="#combining-vectors" title="Permalink to this heading">#</a></h3>
<p>Let’s see how we create and work with data frames in R. Say we have two vectors, <code class="docutils literal notranslate"><span class="pre">x1</span> <span class="pre">&lt;-</span> <span class="pre">c(1,2,3,4,5)</span></code> and <code class="docutils literal notranslate"><span class="pre">x2</span> <span class="pre">&lt;-</span> <span class="pre">c(18,21,20,23,20)</span></code>. We can combine these together into a dataframe using the <code class="docutils literal notranslate"><span class="pre">data.frame()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">)</span>
<span class="n">x2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">18</span><span class="p">,</span><span class="m">21</span><span class="p">,</span><span class="m">20</span><span class="p">,</span><span class="m">23</span><span class="p">,</span><span class="m">20</span><span class="p">)</span>
<span class="nf">data.frame</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">x2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This function takes as arguments all the vectors you want to combine, and lines them up together as columns in the order you typed them in. This way, you imply that the second item in <code class="docutils literal notranslate"><span class="pre">x1</span></code> and the second item in <code class="docutils literal notranslate"><span class="pre">x2</span></code> belong to the same observation, since they appear on the same row in the dataframe. This function also gives the variables names based on what the vectors were named. Let’s rewrite the code above to give <code class="docutils literal notranslate"><span class="pre">x1</span></code> and <code class="docutils literal notranslate"><span class="pre">x2</span></code> more meaningful variable names:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">data.frame</span><span class="p">(</span><span class="n">user_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x2</span><span class="p">)</span>

<span class="c1">#What do you think the &lt;dbl&gt; line in the data frame means? Try googling for an answer! </span>
</pre></div>
</div>
</div>
</div>
<p>Using this approach, you can form a dataframe out of any set of variables - well, almost. Try out the code below, and see if you can find why it causes an error. What can we do to fix it?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">x1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">)</span>
<span class="n">x2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">18</span><span class="p">,</span><span class="m">21</span><span class="p">,</span><span class="m">20</span><span class="p">,</span><span class="m">23</span><span class="p">)</span>
<span class="nf">data.frame</span><span class="p">(</span><span class="n">user_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Since a dataframe is a rectangle, in order for vectors to be combinable, they need to be the same lengths.</p>
</section>
<section id="importing-existing-data">
<h3>Importing existing data<a class="headerlink" href="#importing-existing-data" title="Permalink to this heading">#</a></h3>
<p>The vast majority of the time in data analysis, you are not manually creating vectors and dataframes. Instead, you are importing an existing file of data. So for the rest of this chapter we’re going to practice working with and understanding an example dataset from a study by <a class="reference external" href="https://journals.sagepub.com/stoken/default+domain/hQ2W4fbPrZVJ7eyNJaqu/full">James et al. (2015)</a>, on how playing Tetris may limit intrusive traumatic memories. In this study, 72 participants watched a traumatic video and were then put into one of four experimental conditions designed to test how often intrusive memories happened.</p>
<p>You may have experience opening datasets in programs like Excel with an .xlsx extension. The extension tells you what kind of file format it is - .xlsx, for example, is an excel file. There are many file formats data can be saved in that are more or less easy to open in various software. Our Tetris Memories data is saved as a .csv, meaning a “comma-separated value” format, as this is really easy for computer programs to parse. If you were to open this file in a basic text editor program, you’d see rows are separated on different lines, and columns are separated by commas. In R, the <code class="docutils literal notranslate"><span class="pre">read.csv()</span></code> function can understand this format and create a rectangle dataframe for us.</p>
<p>But before we can load our data, R has to know where on your computer it is located. By default, it only looks in what is called your <strong>working directory</strong> - a specific folder on your computer that R treats as its “home base,” per se. You can use the function <code class="docutils literal notranslate"><span class="pre">getwd()</span></code> to learn what your current working directory is.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">getwd</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Because this book is hosted on a website, the above code should show you the directory where these web files are stored on the web server. On your own computer, <code class="docutils literal notranslate"><span class="pre">getwd()</span></code> will return something different. The function <code class="docutils literal notranslate"><span class="pre">setwd()</span></code> will point R to a different directory.</p>
<p>We’ve stored the <code class="docutils literal notranslate"><span class="pre">tetrismemories.csv</span></code> on another website, so R will be able load it if you use the function <code class="docutils literal notranslate"><span class="pre">read.csv()</span></code> and give it the web destination. Try it out below - the only argument you need for the function is the name of the file, in quotes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">read.csv</span><span class="p">(</span><span class="s">&quot;https://raw.githubusercontent.com/smburns47/Psyc158/main/tetrismemories.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>If it lived on your own computer within the working directory, it would be even simpler to write: <code class="docutils literal notranslate"><span class="pre">read.csv(&quot;tetrismemories.csv&quot;).</span></code> If the data lived in a different directory, for example in a folder called “datasets”, you’d have to include the relative path to that file that in the filename for R to be able to find it. I.e., <code class="docutils literal notranslate"><span class="pre">read.csv(&quot;datasets/tetrismemories.csv&quot;)</span></code>.</p>
</section>
</section>
<section id="looking-at-data">
<h2>4.3 Looking at data<a class="headerlink" href="#looking-at-data" title="Permalink to this heading">#</a></h2>
<p>The first thing to do when opening a dataset for the first time is to understand it - what each variable is, how many data points, what the variable data types are, etc.</p>
<p>After you run the code above, you should see a big print out of the whole dataframe. You might be thinking to yourself, “Wow, that’s a lot to take in!” In fact, this would be considered a small dataset! Real data can have hundreds or thousands of datapoints stored together, with hundreds or thousands of variables recorded. It can get unweildy to look at a whole dataset at once. Thus its usually best to look at a summary of the data in a dataframe, or a sampling of it.</p>
<p>We can use certain functions to do this summarizing for us. But first, we have to make sure we save our dataframe so we can keep using it over and over. Remember that we have a new data type, dataframe, which means it can be saved as an object itself. In the code below, read the dataframe into an object called <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># read the data frame into an object called tetrismemories</span>
<span class="n">tetrismemories</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="c1"># your code here</span>

<span class="c1"># check the data type of this object</span>
<span class="nf">str</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>A cool thing about the <code class="docutils literal notranslate"><span class="pre">str()</span></code> function is that, when you’re working with a complex object like a dataframe that contains many values, it’ll tell you the type of the object as a whole as well as the type of every variable within it. Look at the output above - what data type is the variable “Condition”? Can you find where it tells you the size of the dataframe?</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">str()</span></code> lets you summarize the information within a dataframe without opening the whole thing to view. Another way to do it, if you want to see how the dataframe is arranged, is to use the function <code class="docutils literal notranslate"><span class="pre">head()</span></code>. This will show you just the first 6 lines of the dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#run this code to see the head of the dataframe</span>
<span class="nf">head</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Next you probably want to know how big your dataset is - how many observations and how many variables you are working with. The height and width of a dataframe are known as <strong>dimensions</strong>, and the function <code class="docutils literal notranslate"><span class="pre">dim()</span></code> will tell you the size of each of them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">dim</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The first dimension always corresponds to the number of rows, and the second dimension to the number of columns.</p>
<p>You can also use code to find the size of specific dimensions of the dataframe. Since observations are rows and variables are columns, you can use specific functions to count how many rows and columns a data frame has. In R, these functions are nrow() (for number of rows) and ncol() (for number of columns).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">nrow</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">)</span>

<span class="c1">#use ncol() to output the number of variables in tetrismemories</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="accessing-variables">
<h2>4.4 Accessing variables<a class="headerlink" href="#accessing-variables" title="Permalink to this heading">#</a></h2>
<p>Oftentimes we want to reference a specific variable within a dataframe. So long as a datafile was saved with the first line having the names of each variable, we can access it using the <code class="docutils literal notranslate"><span class="pre">$</span></code> symbol in R. If you want to specify the <code class="docutils literal notranslate"><span class="pre">diary_compliance</span></code> variable in the <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code> dataframe, for example, you would write <code class="docutils literal notranslate"><span class="pre">tetrismemories$diary_compliance</span></code>.</p>
<p>Try using the <code class="docutils literal notranslate"><span class="pre">$</span></code> symbol to print out just the variable <code class="docutils literal notranslate"><span class="pre">diary_compliance</span></code> from <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the $ sign to print out the contents of the diary_compliance variable </span>
<span class="c1"># in the tetrismemories data frame</span>
</pre></div>
</div>
</div>
</div>
<p>When R is asked to print out a single variable (such as <code class="docutils literal notranslate"><span class="pre">diary_compliance</span></code>), R prints out each person’s value on the variable all in a row. You can then work with this variable as if it were a single vector, like we used in the previous chapter. This variable measures how many days people kept record of their intrusive memories. Try giving everyone an extra day in the study by adding 1 to the <code class="docutils literal notranslate"><span class="pre">diary_compliance</span></code> variable. (Remember that adding a constant to a vector adds that value to every item in the vector).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add 1 to everyone&#39;s diary_compliance value  , and print out the result</span>
</pre></div>
</div>
</div>
</div>
<p>Usually you want to access variables this way - it has more meaning to humans reading code. But just so you know, you can also access variables using index notation with <code class="docutils literal notranslate"><span class="pre">[]</span></code> brackets. However, since we know a dataframe has two dimensions (rows and columns), we need to access data using indexing by providing a number value for both which row we want, and which column we want. Recall that rows are always the first dimension and columns are always the second, so we type our indexing like <code class="docutils literal notranslate"><span class="pre">[row_num,</span> <span class="pre">col_num]</span></code>.</p>
<p>If we want to print out the entirety of the third row from tetrismemories, we’d use <code class="docutils literal notranslate"><span class="pre">tetrismemories[3,]</span></code>. Leaving nothing after the comma for column number allows R to return every value in the third row regardless of column. Likewise, returning the entirety of the third <em>column</em> from tetrismemories would look like <code class="docutils literal notranslate"><span class="pre">tetrismemories[,3]</span></code>. Try it out in the code below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Write code to return the 10th row of tetrismemories</span>

<span class="c1">#Write code to return the 5th column of tetrismemories</span>

<span class="c1">#What do you think this code will return?</span>
<span class="n">tetrismemories</span><span class="p">[</span><span class="m">10</span><span class="p">,</span><span class="m">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="subsetting-data">
<h2>4.5 Subsetting data<a class="headerlink" href="#subsetting-data" title="Permalink to this heading">#</a></h2>
<p>Sometimes you want to focus on a subset of your variables in a data frame. For example, you might care about just the variables <code class="docutils literal notranslate"><span class="pre">condition</span></code> and <code class="docutils literal notranslate"><span class="pre">instrusive_memories</span></code> in the <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code> dataframe. The output would be easier to read if it only included these variables and not all the others.</p>
<p>We can use the <code class="docutils literal notranslate"><span class="pre">select()</span></code> function from the <code class="docutils literal notranslate"><span class="pre">dplyr</span></code> package to look at just a subset of variables. <code class="docutils literal notranslate"><span class="pre">dplyr</span></code> is a very commonly-used package that makes working with dataframes easy (click <a class="reference external" href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">here</a> for a cheat sheet of many <code class="docutils literal notranslate"><span class="pre">dplyr</span></code> functions). When using <code class="docutils literal notranslate"><span class="pre">select()</span></code>, we first need to tell R which dataframe, then which variables to select from that dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;dplyr&quot;</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>

<span class="c1">#Make a prediction, what do you think this code will do? </span>
<span class="nf">select</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">,</span><span class="w"> </span><span class="n">condition</span><span class="p">,</span><span class="w"> </span><span class="n">intrusive_memories</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You may need to scroll the output up and down to see it all. It’s quite a lot because the function <code class="docutils literal notranslate"><span class="pre">select()</span></code> will print out all the values of the selected variables. What the <code class="docutils literal notranslate"><span class="pre">select()</span></code> function actually does is return a new data frame with the selected subset of columns.</p>
<p>If you want to look at just a few rows of a few variables, we can combine <code class="docutils literal notranslate"><span class="pre">head()</span></code> and <code class="docutils literal notranslate"><span class="pre">select()</span></code> together in a <strong>nested function.</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">head</span><span class="p">(</span><span class="nf">select</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">,</span><span class="w"> </span><span class="n">condition</span><span class="p">,</span><span class="w"> </span><span class="n">intrusive_memories</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>Nesting functions allows us to do multiple operations on one line. Nested functions always evaluate from the inside out - <code class="docutils literal notranslate"><span class="pre">head()</span></code> is applied to the result of <code class="docutils literal notranslate"><span class="pre">select()</span></code>. In this case, a new data frame is made by <code class="docutils literal notranslate"><span class="pre">select()</span></code>, and then <code class="docutils literal notranslate"><span class="pre">head()</span></code> returns the first six lines of it. Technically, you can nest as many functions as you want! But it does get harder to read the deeper you go, so beware what your future self will appreciate when reading the code again later.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">select()</span></code> function lets us look at a subset of variables. But sometimes you might want to look at a subset of observations. Notice the first person in the <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code> dataframe had 4 instrusive memories over the course of the study. Are they the only person with that many? What happens if we put 4 as an argument in <code class="docutils literal notranslate"><span class="pre">select()</span></code>?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">select</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">select()</span></code> only works on <em>variables</em> (or columns of the data frame), not values. In this case, since you gave it the number 4 for the second argument, it thought you were asking for the 4th column, so it gave you that.</p>
<p>To get a subset of observations (or rows of the data frame) we use a different function: <code class="docutils literal notranslate"><span class="pre">filter()</span></code>. This function filters the dataframe to show only those observations (rows) that match some criteria. For example, here is the code that will return only the observations where the number of memories is 4:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">filter</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">,</span><span class="w"> </span><span class="n">intrusive_memories</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">filter()</span></code>, like <code class="docutils literal notranslate"><span class="pre">select()</span></code>, returns a data frame. In this case, the data frame has ten rows because ten people in the study reported having four intrusive memories.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#How would you use filter() to return a dataframe of everyone who had *at least* 4 memories?</span>
</pre></div>
</div>
</div>
</div>
<p>One challenge for students is to keep track of the difference between an observation (e.g., participants, represented in rows), a variable (e.g., <code class="docutils literal notranslate"><span class="pre">condition</span></code> or <code class="docutils literal notranslate"><span class="pre">intrusive_memories</span></code>, represented in columns), and the values a variable can take (e.g., 4, represented in cells). It is helpful to imagine the rows and columns of a data frame when you read about observations and variables, respectively. If the data are in a dataframe format like this (also known as “tidy”), the rows will always be observations and the columns, variables.</p>
<p>In this course we will be providing most of the data you analyze in a tidy format. However, the world is not always tidy. One day, in the wild world outside of this course, you may have to transform a non-tidy data set into a tidy one.</p>
</section>
<section id="manipulating-data">
<h2>4.6 Manipulating data<a class="headerlink" href="#manipulating-data" title="Permalink to this heading">#</a></h2>
<p>Once data are in a tidy format, we can use R commands to manipulate the data in various ways. Let’s look at a few common things you might need to do before analyzing your data:</p>
<ul class="simple">
<li><p>identifying missing data</p></li>
<li><p>filtering data</p></li>
<li><p>creating new variables</p></li>
<li><p>recoding variables</p></li>
</ul>
<section id="identifying-missing-data">
<h3>Identifying missing data<a class="headerlink" href="#identifying-missing-data" title="Permalink to this heading">#</a></h3>
<p>Sometimes (in fact, usually) we end up with some missing data in our data set. People don’t always answer every question on a survey, someone didn’t show up to their third doctor’s appointment, etc. R represents missing data with the value NA (not available). It will also recode a blank cell in a file as NA. If your data set represents missing data in some other way (e.g., some people put a nonsense value like -999), you should recode the values as NA when working in R.</p>
<p>Let’s consider the <code class="docutils literal notranslate"><span class="pre">tetris_total_score</span></code> variable in the <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code> data frame. First, a function called <code class="docutils literal notranslate"><span class="pre">is.na()</span></code> can be used to tell you whether a datapoint is NA or not (it will out <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> or <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>). If we apply that to an entire vector, it will return a vector of falses and trues corresponding to what indices in the vector have an NA value.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using is.na() on the tetris_total_score variable to see where NA values might be</span>

<span class="nf">is.na</span><span class="p">(</span><span class="n">tetrismemories</span><span class="o">$</span><span class="n">tetris_total_score</span><span class="p">)</span><span class="w"> </span><span class="c1">#remember variable names are case sensitive!</span>
</pre></div>
</div>
</div>
</div>
<p>Based on this, we can easily see some missing data in this variable - there are <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> results to the question “is this datapoint NA.” We can also count how many observations have this value by summing this boolean vector with nested functions (remember, <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> is also represented as 1 in R, and <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> as 0).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sum</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">tetrismemories</span><span class="o">$</span><span class="n">tetris_total_score</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<p>In this dataframe, <code class="docutils literal notranslate"><span class="pre">tetris_total_score</span></code> is the score a participant got when they played tetris. Use the code window below to explore whether there are any missing values for a different variable in <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code>. Why do you think <code class="docutils literal notranslate"><span class="pre">tetris_total_score</span></code> has some missing values?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Write your code here</span>
</pre></div>
</div>
</div>
</div>
<p>Now that you can find missing data, the big question is - what to do about it? There is a whole area of study in quantitative psychology on what to do with missing data. This is an advanced topic, so we won’t get into it in this course. Instead, in future lessons we’ll tell you what actions to take for missing data, but just know that there are different opinions out there about what the <em>best</em> actions are.</p>
</section>
<section id="filtering-data">
<h3>Filtering data<a class="headerlink" href="#filtering-data" title="Permalink to this heading">#</a></h3>
<p>One of these options is to remove all the observations from a dataset that are missing data on a variable you care about. We can use the <code class="docutils literal notranslate"><span class="pre">filter()</span></code> function, introduced previously, to remove observations with missing data from a data frame. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">filter</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">,</span><span class="w"> </span><span class="n">tetris_total_score</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;NA&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Can you remember what the <code class="docutils literal notranslate"><span class="pre">!=</span></code> operator does? This code returns a data frame that includes only cases for which the variable <code class="docutils literal notranslate"><span class="pre">tetris_total_score</span></code> is <em>not</em> equal to NA. Note that the <code class="docutils literal notranslate"><span class="pre">filter()</span></code> function filters in, not out (i.e., keeps).</p>
<p>As with anything in R, your filtered dataframe is only temporary unless you save it to an R object. So save the data with no missing <code class="docutils literal notranslate"><span class="pre">tetris_total_score</span></code> values in a new data frame called <code class="docutils literal notranslate"><span class="pre">tetrismemories_subset</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Write code here to make your new dataframe tetrismemories_subset without any NA in tetris_total_score</span>
</pre></div>
</div>
</div>
</div>
<p>What do you think would happen if we saved <code class="docutils literal notranslate"><span class="pre">filter(tetrismemories,</span> <span class="pre">tetris_total_score</span> <span class="pre">!=</span> <span class="pre">&quot;NA&quot;)</span></code> to the object name <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code>? If we save the filtered data to the same data frame name, it will overwrite the original data frame. Doing this would mean we can no longer access the data we filtered out, and we’d have to reload the data file to get it back. This process is called <strong>destructive editing</strong>. In general, we don’t want to do this - we don’t want to permanently erase any data. Thus if you’re manipulating data in a data frame, it’s usually best to save the manipulated data as a new object. That way you can always access the original data again if needed. <em>Definitely</em> don’t save manipulated data frames as a csv that replaces the original file you loaded the data from.</p>
</section>
<section id="creating-new-variables">
<h3>Creating new variables<a class="headerlink" href="#creating-new-variables" title="Permalink to this heading">#</a></h3>
<p>Often we use multiple measures of a single attribute because no single measure would be adequate. For instance, it would be difficult to measure school achievement with a grade score from just your English class. And as we talked about last chapter, aggregating over multiple measurements can help with measurement error.</p>
<p>However, if you do have multiple measures, you probably will want to combine them into a single variable. In the case of school achievement, a good summary measure might be the average grade earned across all of a student’s courses.</p>
<p>It is quite common to create new variables that mutate values from other variables. For example, in <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code>, participants reported the total number of intrusive memories they experienced (<code class="docutils literal notranslate"><span class="pre">intrusive_memories</span></code>) over a certain number of days they kept track for (<code class="docutils literal notranslate"><span class="pre">diary_compliance</span></code>). We don’t know how many memories per day they were having on average, but we could calculate this by dividing <code class="docutils literal notranslate"><span class="pre">intrusive_memories</span></code> by <code class="docutils literal notranslate"><span class="pre">diary_compliance</span></code> to make a new variable <code class="docutils literal notranslate"><span class="pre">memory_rate</span></code>.</p>
<p>Making a new variable in a data frame is easy. Simply assign the computed vector to a new variable name using the <code class="docutils literal notranslate"><span class="pre">$</span></code> symbol after the data frame name. E.g., <code class="docutils literal notranslate"><span class="pre">tetrismemories$memory_rate</span> <span class="pre">&lt;-</span> <span class="pre">tetrismemories$intrusive_memories</span> <span class="pre">/</span> <span class="pre">tetrismemories$diary_compliance</span></code>. If the variable <code class="docutils literal notranslate"><span class="pre">memory_rate</span></code> already exists in the dataframe, R will overwrite it with these new values. If it doesn’t, R will create a new variable and append it as a new column to the end of <code class="docutils literal notranslate"><span class="pre">tetrismemories</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create copy of dataset to avoid destructive editing</span>
<span class="n">tetrismemories2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tetrismemories</span>

<span class="c1"># Look at all the variables in tetrismemories</span>
<span class="nf">head</span><span class="p">(</span><span class="n">tetrismemories2</span><span class="p">)</span>

<span class="c1"># Create a new variable in tetrismemories called memory_rate from intrusive_memories</span>
<span class="c1"># and diary_compliance</span>
<span class="n">tetrismemories2</span><span class="o">$</span><span class="n">memory_rate</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tetrismemories</span><span class="o">$</span><span class="n">intrusive_memories</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">tetrismemories</span><span class="o">$</span><span class="n">diary_compliance</span>

<span class="c1">#Look at the updated dataframe, and find where the new variable went</span>
<span class="nf">head</span><span class="p">(</span><span class="n">tetrismemories2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Whenever you make new variables, or even do anything else in R, it’s a good idea to check to make sure R did what you intended it to do. You can use the <code class="docutils literal notranslate"><span class="pre">head()</span></code> function for this.</p>
<p>Sometimes you also might want to create a new variable that represents the data in a different way. For example, maybe in one analysis we want to look at only participants who gave memory reports for every day in the study (<code class="docutils literal notranslate"><span class="pre">diary_compliance</span> <span class="pre">==</span> <span class="pre">10</span></code>). You can make a new boolean variable that is <code class="docutils literal notranslate"><span class="pre">true</span></code> for everyone with a 10 value, and <code class="docutils literal notranslate"><span class="pre">false</span></code> for everyone else.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># making a new boolean variable to mark who was fully compliant</span>
<span class="n">tetrismemories2</span><span class="o">$</span><span class="n">full_compliance</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tetrismemories</span><span class="o">$</span><span class="n">diary_compliance</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">10</span>
<span class="nf">head</span><span class="p">(</span><span class="n">tetrismemories2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Write some more code below, using filter(), to make a tetrismemories_subset data frame of only</span>
<span class="c1"># participants who gave reports all 10 days. Does the size of this data frame match what you </span>
<span class="c1"># expect from the code above?</span>
</pre></div>
</div>
</div>
</div>
<p>Another way of creating variables, but using a function instead of the <code class="docutils literal notranslate"><span class="pre">$</span></code> operator, is the <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> function from the <code class="docutils literal notranslate"><span class="pre">dplyr</span></code> package. When you use <code class="docutils literal notranslate"><span class="pre">mutate()</span></code>, you need to specify 3 things:</p>
<ul class="simple">
<li><p>the data frame you want to modify</p></li>
<li><p>the name of the new variable that you’ll create</p></li>
<li><p>the value you will assign to the new variable</p></li>
</ul>
<p>Here is code that will make the same <code class="docutils literal notranslate"><span class="pre">memory_rate</span></code> variable we created earlier:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">tetrismemories2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">mutate</span><span class="p">(</span><span class="n">tetrismemories</span><span class="p">,</span><span class="w"> </span><span class="n">memory_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">intrusive_memories</span><span class="o">/</span><span class="n">diary_compliance</span><span class="p">)</span>
<span class="nf">head</span><span class="p">(</span><span class="n">tetrismemories2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> – like all of the <code class="docutils literal notranslate"><span class="pre">dplyr</span></code> functions – strictly operates on data frames. It’s not set up to work with lists, matrices, vectors, or other data structures. Thus this code is changing a dataset (“mutating” it) to have a new variable. The first argument is the data frame to mutate, and the second argument is called a “name-value pair”. <code class="docutils literal notranslate"><span class="pre">memory_rate</span></code> is not a pre-defined argument in the <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> function, but is a “name” you are choosing to which you assign a new “value.”</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use mutate as another way to make the full_compliance variable from above in tetrismemories2</span>
</pre></div>
</div>
</div>
</div>
<div class="alert alert-block alert-info">
<b>Note</b>: Are we learning too many functions to memorize? Create a "cheatsheet" or page of notes just for keeping track of R functions and how to use them.
</div></section>
<section id="recoding-variables">
<h3>Recoding variables<a class="headerlink" href="#recoding-variables" title="Permalink to this heading">#</a></h3>
<p>There are some instances where you may want to change the way a variable is coded. For instance, the variable <code class="docutils literal notranslate"><span class="pre">condition</span></code> is coded 1-4, depending on which condition a participant was in:</p>
<ol class="arabic simple">
<li><p>No-task control: These participants completed a 10-minute music filler task.</p></li>
<li><p>Reactivation + Tetris: These participants were shown a series of images from the trauma film to
reactivate the traumatic memories (i.e., reactivation task). After a 10-minute music filler task,
participants played the video game Tetris for 12 minutes.</p></li>
<li><p>Tetris Only: These participants played Tetris for 12 minutes, but did not complete the reactivation
task.</p></li>
<li><p>Reactivation Only: These participants completed the reactivation task, but did not play Tetris.</p></li>
</ol>
<p>Since these data are inherently qualitative, but currently stored as numbers, we want to transform them into the categorical data type. Recall the <code class="docutils literal notranslate"><span class="pre">factor()</span></code> function we learned last chapter, and turn this variable into a factor in <code class="docutils literal notranslate"><span class="pre">tetrismemories2</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#Identify the data type of Cond</span>
<span class="nf">str</span><span class="p">(</span><span class="n">tetrismemories2</span><span class="p">)</span>

<span class="c1">#Recode condition into a factor, and save it over the original condition variable</span>


<span class="c1">#Identify the data type of Cond again. Did it change?</span>
<span class="nf">str</span><span class="p">(</span><span class="n">tetrismemories2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Remember that some functions take multiple arguments (such as the dataframe and the variable name), or one argument (just the variable, accessed with <code class="docutils literal notranslate"><span class="pre">$</span></code>). This means you’ll have to remember how functions work, or keep a cheatsheet you can refer back to.</p>
<p>What if you don’t want to change only the data type, but also the values in a variable? We learned last chapter that the function <code class="docutils literal notranslate"><span class="pre">factor()</span></code> can do this with its <code class="docutils literal notranslate"><span class="pre">levels</span></code> and <code class="docutils literal notranslate"><span class="pre">labels</span></code> arguments. Another way to do it is using the function <code class="docutils literal notranslate"><span class="pre">recode()</span></code> like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">recode(tetrismemories2$condition,</span> <span class="pre">&quot;1&quot;=&quot;control&quot;,</span> <span class="pre">&quot;2&quot;=&quot;react_tetris&quot;,</span> <span class="pre">&quot;3&quot;=&quot;tetris&quot;,</span> <span class="pre">&quot;4&quot;=&quot;react&quot;)</span></code></p>
<p>In R, there are often multiple ways to do the same thing! In the <code class="docutils literal notranslate"><span class="pre">recode()</span></code> function, you need to put the old value in quotes; the new variable could be in quotes (if a character value) or not (if numerical). This function also uses the <code class="docutils literal notranslate"><span class="pre">=</span></code> assignment operator instead of <code class="docutils literal notranslate"><span class="pre">&lt;-</span></code>. This is just for telling R a momentary command inside an argument - you’re not permanently assigning 1 in the workspace to have the value of “control”. Keep using <code class="docutils literal notranslate"><span class="pre">&lt;-</span></code> for assigning objects that stick around.</p>
<p>As always, whenever we do anything, we might want to save it. Try saving the recoded version of <code class="docutils literal notranslate"><span class="pre">condition</span></code> as <code class="docutils literal notranslate"><span class="pre">condition_recode</span></code>, a new variable in <code class="docutils literal notranslate"><span class="pre">tetrismemories2</span></code>. Print a few observations of <code class="docutils literal notranslate"><span class="pre">condition</span></code> and <code class="docutils literal notranslate"><span class="pre">condition_recode</span></code> to check that your recode worked.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save the recoded version of `condition` to `condition_recode`</span>
<span class="n">tetrismemories2</span><span class="o">$</span><span class="n">condition_recode</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">recode</span><span class="p">(</span><span class="w">     </span><span class="p">)</span>

<span class="c1"># Write code to print the first 6 observations of `condition` and `condition_recode` only</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="saving-data">
<h2>4.7 Saving data<a class="headerlink" href="#saving-data" title="Permalink to this heading">#</a></h2>
<p>The majority of data projects you will ever work on will involve some data manipulation steps like this. We often do this to fix problems with raw data files or arrange things in a way that will give us easier time later in analysis. This whole process is called <strong>data cleaning</strong>. While we are only spending one chapter dedicated to this in this course, you will actually find (maybe to some <a class="reference external" href="https://www.quora.com/Why-do-people-state-that-the-majority-of-work-for-a-data-scientist-is-data-cleaning-not-the-machine-learning-part">frustration</a>) that the majority of time you spend on a data file is cleaning, rather than analyzing. Once you get comfortable with statistics, analysis can be as simple as a few lines of code. But data cleaning can involve many steps and a lot of time figuring out what cleaning steps you even need to take!</p>
<p>This is why it is very helpful to save the results of your cleaning after you’re done. You don’t want to have to go through all that again if you decide later on you want to do a different kind of data analysis.</p>
<p>Much as we used <code class="docutils literal notranslate"><span class="pre">read.csv()</span></code> to read in data files to R, we can use <code class="docutils literal notranslate"><span class="pre">write.csv()</span></code> to save .csv files of our cleaned data. In its most basic use, it only needs two arguments: the data frame object you wish to save, and a string of the file name you wish to save it as (.csv extension must be included). So if we were to save the results of <code class="docutils literal notranslate"><span class="pre">tetrismemories2</span></code>, we would simply type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">#saving a data frame into a csv file</span>
<span class="nf">write.csv</span><span class="p">(</span><span class="n">tetrismemories2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;tetrismemories2.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This would create a “tetrismemories2.csv” file in the current working directory.</p>
</section>
<section id="chapter-summary">
<h2>Chapter summary<a class="headerlink" href="#chapter-summary" title="Permalink to this heading">#</a></h2>
<p>After reading this chapter, you should be able to:</p>
<ul class="simple">
<li><p>load a dataset into R</p></li>
<li><p>Explain what the rows and columns of a dataframe mean</p></li>
<li><p>Access particular variables in a dataframe</p></li>
<li><p>Use select() and filter() to subset a dataframe</p></li>
<li><p>Identify missing data</p></li>
<li><p>Create and add a new variable to a dataframe</p></li>
<li><p>Recode a variable</p></li>
<li><p>Save a dataframe to a new file</p></li>
</ul>
<p><a class="reference external" href="https://colab.research.google.com/github/smburns47/Psyc158/blob/main/chapter-5.ipynb">Next: Chapter 5 - Describing Data</a></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "smburns47/Psyc158",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            name: "ir",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-structure-of-data">4.1 The structure of data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-data-frame">4.2 Creating a data frame</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-vectors">Combining vectors</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-existing-data">Importing existing data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#looking-at-data">4.3 Looking at data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-variables">4.4 Accessing variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#subsetting-data">4.5 Subsetting data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulating-data">4.6 Manipulating data</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identifying-missing-data">Identifying missing data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-data">Filtering data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-new-variables">Creating new variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recoding-variables">Recoding variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-data">4.7 Saving data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#chapter-summary">Chapter summary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Shannon Burns
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>